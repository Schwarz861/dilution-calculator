<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>æ¬¡æ°¯é…¸æ°´ç¨€é‡‹æ¿ƒåº¦è¨ˆç®—å™¨ | HOCl Dilution Calculator</title>
  <style>
    /*==== Reset ====*/
    *, *::before, *::after { box-sizing:border-box; margin:0; padding:0; }
    html, body { width:100%; height:100%; overflow-x:hidden; }
    body {
      font-family:'Noto Sans TC', sans-serif;
      transition:background .3s, color .3s;
      background:var(--bg-color);
      color:var(--text-color);
      padding:20px;
    }

    /*==== Theme Variables ====*/
    :root {
      --bg-color: #F0F8FF;
      --text-color: #333;
      --glass-bg: rgba(255,255,255,0.8);
      --glass-border: rgba(255,255,255,0.5);
      --input-bg: var(--glass-bg);
      --result-bg: var(--glass-bg);
      --btn-bg: #fff;
      --btn-text: #333;
      --btn-shadow: rgba(0,0,0,0.08);
      --primary-grad: linear-gradient(135deg,#4e7cf3,#1f59d8);
      --clear-grad: linear-gradient(135deg,#fff176,#ffee58);
      --shadow: rgba(0,0,0,0.15);
    }
    @media (prefers-color-scheme: dark) {
      :root:not([data-theme]) {
        --bg-color: #121212;
        --text-color: #EEE;
        --glass-bg: rgba(30,30,30,0.8);
        --glass-border: rgba(255,255,255,0.2);
        --input-bg: rgba(50,50,50,0.9);
        --result-bg: rgba(40,40,40,0.95);
        --btn-bg: rgba(255,255,255,0.1);
        --btn-text: #fff;
        --btn-shadow: rgba(0,0,0,0.5);
      }
    }
    [data-theme="dark"] {
      --bg-color: #121212;
      --text-color: #EEE;
      --glass-bg: rgba(30,30,30,0.8);
      --glass-border: rgba(255,255,255,0.2);
      --input-bg: rgba(50,50,50,0.9);
      --result-bg: rgba(40,40,40,0.95);
      --btn-bg: rgba(255,255,255,0.1);
      --btn-text: #fff;
      --btn-shadow: rgba(0,0,0,0.5);
    }

    /*==== Container ====*/
    .container {
      max-width:500px; width:100%; margin:20px auto;
      background:var(--glass-bg); backdrop-filter:blur(15px);
      border:1px solid var(--glass-border); border-radius:20px;
      padding:60px 30px 30px; position:relative;
      box-shadow:0 8px 20px var(--shadow);
    }

    /*==== Top Controls ====*/
    .top-controls { position:absolute; top:16px; right:16px; display:flex; gap:8px; }
    .top-controls button { padding:8px 16px; border:none; border-radius:6px; background:var(--primary-grad); color:#fff; cursor:pointer; box-shadow:0 4px 12px var(--shadow); transition:background .3s; }
    .top-controls button:hover { background: var(--primary-grad-hover); }

    /*==== Form ====*/
    h1 { text-align:center; margin-bottom:20px; font-size:1.6em; }
    label { display:block; margin:12px 0 8px; font-weight:bold; }
    input { width:100%; padding:12px; font-size:1em; border-radius:8px; border:1px solid rgba(0,0,0,0.1); background:var(--input-bg); backdrop-filter:blur(10px); color:var(--text-color); }

    /*==== Result ====*/
    .result { margin-top:20px; padding:20px; font-weight:bold; line-height:1.6; background:var(--result-bg); backdrop-filter:blur(15px); border-radius:12px; color:var(--text-color); }
    .result[data-lang="zh"] { white-space:nowrap; word-break:keep-all; }
    .result[data-lang="en"] { white-space:normal; word-break:break-word; }

    /*==== Buttons ====*/
    .buttons { display:flex; gap:16px; justify-content:space-evenly; margin-top:30px; }
    .buttons button { flex:1; min-width:0; padding:12px; height:48px; display:flex; align-items:center; justify-content:center; gap:8px; border:none; border-radius:8px; background:var(--btn-bg); color:var(--btn-text); box-shadow:0 4px 8px var(--btn-shadow); cursor:pointer; transition:filter .3s,transform .1s; white-space:nowrap; font-size:1.1em; }
    .buttons button:hover { filter:brightness(1.1); transform:translateY(-2px); }
    #btn-copy { font-size:0.9em; }

    @media(max-width:480px){ .container{padding:60px 20px 20px;} .top-controls{position:static;justify-content:flex-end;margin-bottom:20px;} .buttons{flex-wrap:wrap;} }
  </style>
</head>
<body>
  <div class="container">
    <div class="top-controls">
      <button id="theme-toggle"></button>
      <button id="lang-toggle"></button>
    </div>
    <h1 id="title"></h1>
    <label id="label-c1" for="c1"></label>
    <input id="c1" type="number" value="2000">
    <label id="label-c2" for="c2"></label>
    <input id="c2" type="number" placeholder="">
    <label id="label-v2" for="v2"></label>
    <input id="v2" type="number" placeholder="">
    <div class="result" id="result" data-lang="zh"></div>
    <div class="buttons">
      <button id="btn-calc"></button>
      <button id="btn-clear"></button>
      <button id="btn-copy"></button>
    </div>
  </div>
  <script>
    const texts = {
      zh:{ title:'æ¬¡æ°¯é…¸æ°´ç¨€é‡‹æ¿ƒåº¦è¨ˆç®—å™¨', labelC1:'åŸå§‹æ¿ƒåº¦ (ppm)ï¼š', labelC2:'ç›®æ¨™æ¿ƒåº¦ (ppm)ï¼š', labelV2:'ç›®æ¨™æ°´é‡ (å…¬å‡)ï¼š', phC2:'è«‹è¼¸å…¥ç›®æ¨™æ¿ƒåº¦', phV2:'è«‹è¼¸å…¥ç›®æ¨™æ°´é‡', btnCalc:'ğŸ” è¨ˆç®—', btnClear:'ğŸ—‘ï¸ æ¸…é™¤', btnCopy:'ğŸ“‹ è¤‡è£½çµæœ', resultPrefix:'éœ€è¦åŠ å…¥çš„åŸæ¶²é‡ï¼š', mlText:'ç›¸ç•¶æ–¼', mlUnit:'æ¯«å‡', errorStock:'åŸæ¶²æ¿ƒåº¦ä½æ–¼ç›®æ¨™æ¿ƒåº¦ï¼Œéœ€ç”¨æ›´é«˜æ¿ƒåº¦é€²è¡Œç¨€é‡‹ã€‚', alertCopied:'çµæœå·²è¤‡è£½ï¼', alertError:'è«‹å…ˆè¨ˆç®—çµæœå†è¤‡è£½ï¼', themeLight:'â˜€ï¸ æ·ºè‰²æ¨¡å¼', themeDark:'ğŸŒ™ æ·±è‰²æ¨¡å¼', langToggle:'EN' },
      en:{ title:'HOCl Dilution Calculator', labelC1:'Original Concentration (ppm):', labelC2:'Target Concentration (ppm):', labelV2:'Target Volume (L):', phC2:'Enter target concentration', phV2:'Enter target volume', btnCalc:'ğŸ” Calculate', btnClear:'ğŸ—‘ï¸ Clear', btnCopy:'ğŸ“‹ Copy Result', resultPrefix:'Required Volume:', mlText:'Equivalent to', mlUnit:'mL', errorStock:'Original concentration is lower than target concentration. Please use a higher concentration stock to dilute.', alertCopied:'Result copied!', alertError:'Please calculate before copying!', themeLight:'â˜€ï¸ Light Mode', themeDark:'ğŸŒ™ Dark Mode', langToggle:'ä¸­' }
    };
    let lang = localStorage.getItem('lang') || 'zh';
    function applyLanguage(){ const t=texts[lang]; document.getElementById('title').textContent=t.title; document.getElementById('label-c1').textContent=t.labelC1; document.getElementById('label-c2').textContent=t.labelC2; document.getElementById('label-v2').textContent=t.labelV2; document.getElementById('c2').placeholder=t.phC2; document.getElementById('v2').placeholder=t.phV2; document.getElementById('btn-calc').textContent=t.btnCalc; document.getElementById('btn-clear').textContent=t.btnClear; document.getElementById('btn-copy').textContent=t.btnCopy; document.getElementById('lang-toggle').textContent=t.langToggle; updateThemeBtn(); calculate(); document.getElementById('result').setAttribute('data-lang',lang); }
    function toggleLanguage(){ lang = lang==='zh'?'en':'zh'; localStorage.setItem('lang',lang); applyLanguage(); }
    function updateThemeBtn(){ const t=texts[lang]; const btn=document.getElementById('theme-toggle'); const cur=document.documentElement.getAttribute('data-theme')||(window.matchMedia('(prefers-color-scheme: dark)').matches?'dark':'light'); btn.textContent=cur==='dark'?t.themeLight:t.themeDark; }
    function initTheme(){ const s=localStorage.getItem('theme'); if(s==='light'||s==='dark') document.documentElement.setAttribute('data-theme',s); updateThemeBtn(); }
    function toggleTheme(){ const cur=document.documentElement.getAttribute('data-theme'), next=cur==='dark'?'light':'dark'; document.documentElement.setAttribute('data-theme',next); localStorage.setItem('theme',next); updateThemeBtn(); }
    document.getElementById('lang-toggle').addEventListener('click',toggleLanguage);
    document.getElementById('theme-toggle').addEventListener('click',toggleTheme);
    function calculate(){ const c1=parseFloat(document.getElementById('c1').value); const c2v=document.getElementById('c2').value; const v2v=document.getElementById('v2').value; const res=document.getElementById('result'); const t=texts[lang]; if(!c2v||!v2v){ res.innerHTML=''; return; } const c2=parseFloat(c2v); if(c1<c2){ res.innerHTML=t.errorStock; return; } const v2=parseFloat(v2v); const v1=(c2*v2)/c1; const v1str=parseFloat(v1.toFixed(6)).toString(); let html=`${t.resultPrefix} ${v1str} ${lang==='zh'?'å…¬å‡':'L'}`; if(v1str.includes('.') && v1str.split('.')[1].length>2){ const mlVal=v1*1000; const mlStr=parseFloat(mlVal.toFixed(6)).toString(); html+=`<br>${t.mlText} ${mlStr} ${t.mlUnit}`; } res.innerHTML=html; }
    function clearFields(){ document.getElementById('c2').value=''; document.getElementById('v2').value=''; document.getElementById('result').innerHTML=''; }
    function copyResult(){ const t=texts[lang]; const txt=document.getElementById('result').innerText.replace(/\n/g,' '); if(!txt){ alert(t.alertError); return; } navigator.clipboard.writeText(txt).then(()=>alert(t.alertCopied),()=>{ const ta=document.createElement('textarea'); ta.value=txt; document.body.appendChild(ta); ta.select(); document.execCommand('copy'); document.body.removeChild(ta); alert(t.alertCopied); }); }
    document.getElementById('btn-calc').addEventListener('click',calculate);
    document.getElementById('btn-clear').addEventListener('click',clearFields);
    document.getElementById('btn-copy').addEventListener('click',copyResult);
    applyLanguage(); initTheme();
  </script>
</body>
</html>